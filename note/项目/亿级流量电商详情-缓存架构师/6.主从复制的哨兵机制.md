###  1.哨兵机制的介绍

第5章介绍了redis的主从复制，可以提高并发量，write数据到主节点，然后主节点同步数据到从节点中。当有大量读请求的时候会分配到从节点中

但是，如果主节点挂掉之后，就无法继续提供服务。

**redis高可用方案**

- redis2.6之后提供了哨步机制，能够实现主从节点的自动切换。
- redis3.0之后提供了redis cluster集群节点最小配置6个节点以上（3主3从），主节点作为备用节点，不提供请求，只作为故障转移使用。

**哨兵机制**

哨兵是redis集群架构中非常重要的一个组件，主要完成的功能如下：

- 集群监控：负责监控redis master和slave进程是否正常工作；
- 消息通知：如果某个redis实例有故障，那么哨兵负责发送消息作为报警通知给管理员；
- 故障转移：如果master node挂掉了，会自动转移到slave node上；
- 配置中心：如果故障转移发生了，通知client客户端新的master地址；

![](F:\__study__\hulianwang\study\note\项目\亿级流量电商详情-缓存架构师\img\哨兵机制.png)

### 2.哨兵的核心知识

- 哨兵至少需要3个实例来保证自己的健壮性
- 哨兵+redis主从的部署架构，是不是会保证数据零丢失的，只能保证redis集群的高可用性
- 对于哨兵+redis主从这种复杂的部署架构，尽量在测试环境和生产环境，都进行充足的测试和演练

